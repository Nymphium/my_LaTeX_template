\usepackage{ifluatex,ifxetex}

\ifxetex
\usepackage{zxjatype}
\usepackage{xltxtra}

\defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\setjamainfont{TakaoExMincho}
\setjasansfont{Source Han Sans JP}
\setjamonofont{Koruri}

\XeTeXlinebreaklocale "ja"
\setlength{\parindent}{1em}
\XeTeXlinebreakskip=0pt plus 1pt
\XeTeXlinebreakpenalty=0
\def\<{\@ifstar{\zx@hwback\nobreak}{\zx@hwback\relax}}
\def\zx@hwback#1{\leavevmode#1\hskip-.5em\relax}
\fi
\usepackage{luatexja,luatexja-otf,luacode,metalogo}
\usepackage{luatexja-fontspec}
\usepackage{luatexja-adjust}
\usepackage[deluxe]{luatexja-preset}
\setmonofont{Monaco}
\ltjenableadjust

\newcommand{\editdate}{
	\luaexec{
		tex.write(os.date("\%Y \%m/\%d \%H:\%M"))
	}
}

\ifxetex

