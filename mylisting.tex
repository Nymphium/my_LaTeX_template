\usepackage[final,writefile]{listings}
\usepackage{xcolor}

\definecolor{cream}{rgb}{1,1,0.8}
\definecolor{colKeys}{rgb}{0,0,1}
\definecolor{colIdentifier}{rgb}{0,0,0}
\definecolor{colComments}{rgb}{1,0,0}
\definecolor{colString}{rgb}{0,0.5,0}
\definecolor{green}{HTML}{006400}
\definecolor{str}{HTML}{FF1493}
\definecolor{gold}{HTML}{FFA500}
\definecolor{waterblue}{HTML}{4169E1}
\definecolor{text}{HTML}{3CB371}
\definecolor{stdout}{HTML}{DC143C}

\lstset{
	float=hbp,
	backgroundcolor=\color{cream},
	basicstyle=\ttfamily\small\color{green},
	numberstyle=\sffamily\footnotesize\color{black},
	rulecolor=\color{black},
	identifierstyle=\color{green},
	keywordstyle=\color{waterblue},
	keywordstyle=[2]\color{str},
	keywordstyle=[3]\color{text},
	keywordstyle=[4]\color{gold},
	keywordstyle=[5]\color{stdout},
	stringstyle=\color{str},
	commentstyle=\color{colComments},
	columns=flexible,
	tabsize=2,
	frame=single,
	extendedchars=true,
	inputencoding=utf8x,
	showspaces=false,
	showstringspaces=false,
	numbers=left,
	breaklines=true,
	breakautoindent=true,
	captionpos=b
}

\newcommand{\mylisting}[2][]{
	\lstinputlisting[caption={\rm{\detokenize{#2}}},#1]{#2}
}

